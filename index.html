<div id="question-container">
    <img id="question-image" src="" alt="Question Image" style="width:100%; max-width:300px; display:block; margin:0 auto 20px; border:1px solid #ddd; border-radius:5px;">
    <p id="question-text">Loading...</p>
    <ul id="answer-list" style="list-style-type: none; padding: 0;"></ul>
    <button id="next-button" disabled>Next</button>
</div>

<script>
    let questions = [];
    let answers = [];
    let currentIndex = 0;

    console.log('Fetching data...');

    // Fetch questions and answers
    Promise.all([
        fetch('Questions/questions.txt').then(res => {
            console.log('Fetching questions.txt:', res.ok ? 'Success' : 'Failed');
            return res.ok ? res.text() : Promise.reject('Failed to fetch questions.txt');
        }),
        fetch('Questions/answers.txt').then(res => {
            console.log('Fetching answers.txt:', res.ok ? 'Success' : 'Failed');
            return res.ok ? res.text() : Promise.reject('Failed to fetch answers.txt');
        })
    ])
    .then(([questionsData, answersData]) => {
        console.log('Raw questions data:', questionsData);
        console.log('Raw answers data:', answersData);

        // Parse questions
        questions = questionsData.split('\n').map(line => {
            const fields = line.split('-');
            if (fields.length >= 3) {
                console.log(`Parsed question: ${fields[0].trim()} - ${fields[2].trim()}`);
                return {
                    number: fields[0].trim(),
                    text: fields[2].trim()
                };
            }
            console.log('Skipping malformed question line:', line);
            return null;
        }).filter(Boolean);

        console.log('Parsed questions array:', questions);

        // Parse answers
        answers = answersData.split('\n').map(line => {
            const fields = line.split('-');
            if (fields.length >= 3) {
                console.log(`Parsed answer: Question ${fields[0].trim()}, Choice ${fields[1].trim()} - ${fields[2].trim()}`);
                return {
                    questionNumber: fields[0].trim(),
                    choice: fields[1].trim(),
                    text: fields[2].trim()
                };
            }
            console.log('Skipping malformed answer line:', line);
            return null;
        }).filter(Boolean);

        console.log('Parsed answers array:', answers);

        displayQuestion();
    })
    .catch(error => {
        console.error('Error loading data:', error);
        document.getElementById('question-text').textContent = 'Error loading data.';
    });

    function displayQuestion() {
        const questionTextElement = document.getElementById('question-text');
        const questionImageElement = document.getElementById('question-image');
        const answerListElement = document.getElementById('answer-list');
        const nextButton = document.getElementById('next-button');

        if (currentIndex < questions.length) {
            const question = questions[currentIndex];

            console.log('Displaying question:', question);

            // Display question text
            questionTextElement.innerHTML = `<span class="question-number">${question.number}</span> - ${question.text}`;
            
            // Display question image
            const imagePath = `Images/${question.number}.jpeg`;
            questionImageElement.src = imagePath;
            questionImageElement.alt = `Image for Question ${question.number}`;
            questionImageElement.style.display = 'block';
            console.log('Displaying image:', imagePath);

            // Display corresponding answers
            const filteredAnswers = answers.filter(a => a.questionNumber === question.number);
            console.log('Filtered answers for question:', question.number, filteredAnswers);
            answerListElement.innerHTML = ''; // Clear previous answers
            filteredAnswers.forEach(answer => {
                const li = document.createElement('li');
                li.innerHTML = `<strong>${answer.choice}</strong>: ${answer.text}`;
                answerListElement.appendChild(li);
            });

            nextButton.disabled = false;
        } else {
            // No more questions
            console.log('No more questions to display.');
            questionTextElement.textContent = 'No more questions!';
            questionImageElement.style.display = 'none';
            answerListElement.innerHTML = '';
            nextButton.disabled = true;
        }
    }

    document.getElementById('next-button').addEventListener('click', () => {
        console.log('Next button clicked.');
        currentIndex++;
        displayQuestion();
    });
</script>
