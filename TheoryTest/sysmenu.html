<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Orion Drive - System Menu</title>
    <style>
        body { font-family: -apple-system, sans-serif; background-color: #f4f7f9; color: #333; padding: 20px; margin: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; }
        .container { width: 100%; max-width: 600px; margin-top: 10px; }
        .card { background: #fff; padding: 25px; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 1px solid #e1e8ed; margin-bottom: 20px; text-align: center; }
        
        h1 { font-size: 1.8rem; color: #1a1a1a; margin-bottom: 5px; }
        h2 { font-size: 1rem; color: #666; font-weight: 400; margin-bottom: 20px; }
        
        .status-bar { display: inline-block; background: #fff3e0; color: #e65100; padding: 5px 15px; border-radius: 20px; font-size: 0.85rem; font-weight: bold; margin-bottom: 25px; }
        .status-bar::before { content: "üõ°Ô∏è Admin Mode "; }

        .sub-heading { color: #007bff; font-size: 0.85rem; font-weight: bold; text-align: left; margin-bottom: 12px; margin-top: 20px; text-transform: uppercase; letter-spacing: 1px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        
        .button-grid { display: flex; flex-direction: column; gap: 10px; }
        
        .btn-blue { background: #007bff; color: #fff; border: none; padding: 15px; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 0.9rem; width: 100%; text-transform: uppercase; }
        .btn-gray { background: #607d8b; color: #fff; border: none; padding: 15px; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 0.9rem; width: 100%; text-transform: uppercase; }
        .btn-danger { background: #d32f2f; color: #fff; border: none; padding: 15px; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 0.9rem; width: 100%; text-transform: uppercase; margin-top: 10px; }

        #v-tag-top { position: fixed; top: 10px; right: 15px; font-family: monospace; font-size: 0.9rem; color: #fff; background: rgba(211, 47, 47, 0.9); padding: 4px 8px; border-radius: 4px; z-index: 1000; }
    </style>
</head>
<body>
    <div id="v-tag-top">v2.1.3</div>

    <div class="container">
        <div class="card">
            <h1>ORION DRIVE</h1>
            <h2>Admin Management</h2>
            <div class="status-bar">System Manager Access</div>

            <div class="sub-heading">Mock Tests</div>
            <div id="mock-buttons" class="button-grid"></div>

            <div class="sub-heading">System Management</div>
            <div id="sys-buttons" class="button-grid"></div>

            <div class="sub-heading">Emergency</div>
            <button class="btn-danger" onclick="resetSystemStamp()">RESET SYSTEM STAMP</button>
            
            <button class="btn-gray" style="margin-top:20px; background:#bdc3c7; color:#333;" onclick="window.location.href='mainmenu.html'">Exit Admin Mode</button>
        </div>
    </div>

    <script>
        const SCRIPT_VERSION = "v2.1.3";

        async function initSysMenu() {
            // Version check
            document.getElementById('v-tag-top').innerText = SCRIPT_VERSION;

            // Security check
            if (!sessionStorage.getItem('orion_session_token')) {
                window.location.href = 'index.html';
                return;
            }

            // Load Mock Tests (Standard)
            loadSection('options.json', 'mock-buttons', 'btn-blue');
            
            // Load Management Options (System)
            loadSection('sysmenu.json', 'sys-buttons', 'btn-gray');
        }

        async function loadSection(url, containerId, btnClass) {
            try {
                const response = await fetch(url);
                const data = await response.json();
                const container = document.getElementById(containerId);
                
                data.forEach(item => {
                    const btn = document.createElement('button');
                    btn.className = btnClass;
                    btn.innerText = item.description;
                    btn.onclick = () => { window.location.href = item.htmlName; };
                    container.appendChild(btn);
                });
            } catch (err) {
                console.error("Error loading " + url, err);
            }
        }

        function resetSystemStamp() {
            if (confirm("This will clear the monthly security token. Continue?")) {
                localStorage.removeItem('orion_system_stamp');
                sessionStorage.removeItem('orion_session_token');
                alert("System Stamp Reset. Redirecting to Login...");
                window.location.href = 'index.html';
            }
        }

        window.onload = initSysMenu;
    </script>
</body>
</html>
